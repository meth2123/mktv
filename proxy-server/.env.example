# ========== TEST EN LOCAL (décommenter pour lancer tout en local) ==========
# PROXY_URL=http://localhost:3001
# CORS_ORIGIN=http://localhost:5173

# ========== SOURCE DES CHAÎNES — seul le proxy s'y connecte ==========
# Option A : API Xtream Codes (connexion directe au serveur Xtream)
# XTREAM_BASE_URL=http://votre-serveur-xtream:8080
# XTREAM_USERNAME=votre_user
# XTREAM_PASSWORD=votre_password
# XTREAM_LIVE_FORMAT=ts
# XTREAM_INCLUDE_VOD=true
# DEBUG_XTREAM_CHECK=true

# Option B : Fichier M3U local
# ORIGINAL_PLAYLIST_FILE=./xtream_playlist.m3u

# Option C : URL playlist M3U
# ORIGINAL_PLAYLIST_URL=http://votre-provider.com/playlist.m3u

# URL publique du proxy (en local: http://localhost:3001)
PROXY_URL=http://localhost:3001

# Clé de chiffrement (min 32 caractères)
ENCRYPTION_KEY=votre-cle-secrete-tres-longue-32-caracteres-min

# Même secret que le backend (JWT)
JWT_SECRET=memesecretquelebackend

MAX_DEVICES_PER_USER=3
# Limite de lectures simultanees par utilisateur (proxy seulement)
MAX_STREAMS_PER_USER=1
# Limite globale proxy (0 = desactive)
MAX_GLOBAL_STREAMS=0
# Nettoyage des sessions fantomes (onglet ferme/crash)
STREAM_SESSION_TTL_SECONDS=90
STREAM_SESSION_CLEANUP_SECONDS=15

# Securite anti-scan/bruteforce sans base de donnees (memoire)
SECURITY_MAX_FAILS=12
SECURITY_FAIL_WINDOW_SECONDS=300
SECURITY_BLOCK_SECONDS=900
SECURITY_CLEANUP_SECONDS=60

# Allowlist upstream: hosts autorises pour /stream (virgule separee)
# Exemple: UPSTREAM_ALLOWLIST=esmaxnews.com,cdn.esmaxnews.com
UPSTREAM_ALLOWLIST=
# true en prod pour bloquer toute URL non autorisee
STRICT_UPSTREAM_ALLOWLIST=false

PORT=3001
